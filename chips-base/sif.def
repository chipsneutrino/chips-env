Bootstrap: library
From: ubuntu:18.04
Stage: build

%labels
    name chips-base

%files
    /home/josh/phd/chips-env/chips-base/start.sh /usr/local/bin/
    /home/josh/phd/chips-env/chips-base/setup.sh /opt

%post
    # Install chips-base software requirements using apt
    apt-get install -y --no-install-recommends software-properties-common
    apt-get update 
    add-apt-repository universe
    apt-get install -y --no-install-recommends libgsl-dev wget tar git dpkg-dev \
        cmake g++ gcc binutils libx11-dev libxpm-dev libxft-dev libxext-dev python-dev 
    apt-get clean
    rm -rf /var/lib/apt/lists/*

    # Install chips-base software using the setup.sh script
    chmod +x /opt/setup.sh
    ./opt/setup.sh

    # Make start script executable
    chmod +x /usr/local/bin/start.sh

%runscript
    start.sh